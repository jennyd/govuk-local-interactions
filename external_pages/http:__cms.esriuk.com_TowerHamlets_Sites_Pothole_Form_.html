

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">


<head id="Head1"><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info = {"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"1e348194dd","applicationID":"2899797,2899753","transactionName":"b1FXMhECDEEFUUILVlYbdDUzTBZXCUJaA01dRxoUBhMNQBBbWAUWT11PBxEHTFMXQk4=","queueTime":15,"applicationTime":447,"ttGuid":"654268F97EE40FF7","agent":""}</script><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"VQ8HV15VGwEIXVhVDgY="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({QJf3ax:[function(t,e){function n(){}function r(t){function e(t){return t&&t instanceof n?t:t?a(t,i,o):o()}function s(n,r,o){t&&t(n,r,o);for(var i=e(o),a=f(n),s=a.length,c=0;s>c;c++)a[c].apply(i,r);return i}function c(t,e){d[t]=f(t).concat(e)}function f(t){return d[t]||[]}function u(){return r(s)}var d={};return{on:c,emit:s,create:u,listeners:f,context:e,_events:d}}function o(){return new n}var i="nr@context",a=t("gos");e.exports=r()},{gos:"7eSDFh"}],ee:[function(t,e){e.exports=t("QJf3ax")},{}],3:[function(t){function e(t){try{i.console&&console.log(t)}catch(e){}}var n,r=t("ee"),o=t(1),i={};try{n=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(i.console=!0,-1!==n.indexOf("dev")&&(i.dev=!0),-1!==n.indexOf("nr_dev")&&(i.nrDev=!0))}catch(a){}i.nrDev&&r.on("internal-error",function(t){e(t.stack)}),i.dev&&r.on("fn-err",function(t,n,r){e(r.stack)}),i.dev&&(e("NR AGENT IN DEVELOPMENT MODE"),e("flags: "+o(i,function(t){return t}).join(", ")))},{1:25,ee:"QJf3ax"}],4:[function(t){function e(t,e,n,i,a){try{f?f-=1:r("err",[a||new UncaughtException(t,e,n)])}catch(c){try{r("ierr",[c,(new Date).getTime(),!0])}catch(u){}}return"function"==typeof s?s.apply(this,o(arguments)):!1}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function n(t){r("err",[t,(new Date).getTime()])}var r=t("handle"),o=t(6),i=t("ee"),a=t("loader"),s=window.onerror,c=!1,f=0;a.features.err=!0,t(5),window.onerror=e;try{throw new Error}catch(u){"stack"in u&&(t(1),t(2),"addEventListener"in window&&t(3),a.xhrWrappable&&t(4),c=!0)}i.on("fn-start",function(){c&&(f+=1)}),i.on("fn-err",function(t,e,r){c&&(this.thrown=!0,n(r))}),i.on("fn-end",function(){c&&!this.thrown&&f>0&&(f-=1)}),i.on("internal-error",function(t){r("ierr",[t,(new Date).getTime(),!0])})},{1:11,2:10,3:8,4:12,5:3,6:26,ee:"QJf3ax",handle:"D5DuLP",loader:"G9z0Bl"}],5:[function(t){if(window.addEventListener){var e=t("handle"),n=t("ee");t(1),window.addEventListener("click",function(){e("inc",["ck"])},!1),window.addEventListener("hashchange",function(){e("inc",["hc"])},!1),n.on("pushState-start",function(){e("inc",["ps"])})}},{1:9,ee:"QJf3ax",handle:"D5DuLP"}],6:[function(t){t("loader").features.ins=!0},{loader:"G9z0Bl"}],7:[function(t){function e(){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var n=t("ee"),r=t("handle"),o=t(1),i=t(2);t("loader").features.stn=!0,t(3);var a=Event;n.on("fn-start",function(t){var e=t[0];e instanceof a&&(this.bstStart=Date.now())}),n.on("fn-end",function(t,e){var n=t[0];n instanceof a&&r("bst",[n,e,this.bstStart,Date.now()])}),o.on("fn-start",function(t,e,n){this.bstStart=Date.now(),this.bstType=n}),o.on("fn-end",function(t,e){r("bstTimer",[e,this.bstStart,Date.now(),this.bstType])}),i.on("fn-start",function(){this.bstStart=Date.now()}),i.on("fn-end",function(t,e){r("bstTimer",[e,this.bstStart,Date.now(),"requestAnimationFrame"])}),n.on("pushState-start",function(){this.time=Date.now(),this.startPath=location.pathname+location.hash}),n.on("pushState-end",function(){r("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),"addEventListener"in window.performance&&(window.performance.clearResourceTimings?window.performance.addEventListener("resourcetimingbufferfull",function(){r("bstResource",[window.performance.getEntriesByType("resource")]),window.performance.clearResourceTimings()},!1):window.performance.addEventListener("webkitresourcetimingbufferfull",function(){r("bstResource",[window.performance.getEntriesByType("resource")]),window.performance.webkitClearResourceTimings()},!1)),document.addEventListener("scroll",e,!1),document.addEventListener("keypress",e,!1),document.addEventListener("click",e,!1)}},{1:11,2:10,3:9,ee:"QJf3ax",handle:"D5DuLP",loader:"G9z0Bl"}],8:[function(t,e){function n(t){for(var e=t;e&&!e.hasOwnProperty("addEventListener");)e=Object.getPrototypeOf(e);e&&r(e)}function r(t){a.inPlace(t,["addEventListener","removeEventListener"],"-",o)}function o(t){return t[1]}var i=t("ee").create(),a=t(1)(i),s=t("gos");e.exports=i,r(window),"getPrototypeOf"in Object?(n(document),n(XMLHttpRequest.prototype)):XMLHttpRequest.prototype.hasOwnProperty("addEventListener")&&r(XMLHttpRequest.prototype),i.on("addEventListener-start",function(t){if(t[1]){var e=t[1];if("function"==typeof e){var n=s(e,"nr@wrapped",function(){return a(e,"fn-",null,e.name||"anonymous")});this.wrapped=t[1]=n}else"function"==typeof e.handleEvent&&a.inPlace(e,["handleEvent"],"fn-")}}),i.on("removeEventListener-start",function(t){var e=this.wrapped;e&&(t[1]=e)})},{1:27,ee:"QJf3ax",gos:"7eSDFh"}],9:[function(t,e){var n=t("ee").create(),r=t(1)(n);e.exports=n,r.inPlace(window.history,["pushState","replaceState"],"-")},{1:27,ee:"QJf3ax"}],10:[function(t,e){var n=t("ee").create(),r=t(1)(n);e.exports=n,r.inPlace(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame"],"raf-"),n.on("raf-start",function(t){t[0]=r(t[0],"fn-")})},{1:27,ee:"QJf3ax"}],11:[function(t,e){function n(t,e,n){t[0]=i(t[0],"fn-",null,n)}function r(t,e,n){this.method=n,this.timerDuration="number"==typeof t[1]?t[1]:0,t[0]=i(t[0],"fn-",this,n)}var o=t("ee").create(),i=t(1)(o);e.exports=o,i.inPlace(window,["setTimeout","setImmediate"],"setTimer-"),i.inPlace(window,["setInterval"],"setInterval-"),i.inPlace(window,["clearTimeout","clearImmediate"],"clearTimeout-"),o.on("setInterval-start",n),o.on("setTimer-start",r)},{1:27,ee:"QJf3ax"}],12:[function(t,e){function n(){f.inPlace(this,l,"fn-",o)}function r(t,e){f.inPlace(e,["onreadystatechange"],"fn-",o)}function o(t,e){return e}function i(t,e){for(var n in t)e[n]=t[n];return e}var a=t("ee").create(),s=t(1),c=t(2),f=c(a),u=c(s),d=window.XMLHttpRequest,l=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"];e.exports=a,window.XMLHttpRequest=function(t){var e=new d(t);try{a.emit("new-xhr",[e],e),e.hasOwnProperty("addEventListener")&&u.inPlace(e,["addEventListener","removeEventListener"],"-",o),e.addEventListener("readystatechange",n,!1)}catch(r){try{a.emit("internal-error",[r])}catch(i){}}return e},i(d,XMLHttpRequest),XMLHttpRequest.prototype=d.prototype,f.inPlace(XMLHttpRequest.prototype,["open","send"],"-xhr-",o),a.on("send-xhr-start",r),a.on("open-xhr-start",r)},{1:8,2:27,ee:"QJf3ax"}],13:[function(t){function e(t){var e=this.params,r=this.metrics;if(!this.ended){this.ended=!0;for(var o=0;u>o;o++)t.removeEventListener(f[o],this.listener,!1);if(!e.aborted){if(r.duration=(new Date).getTime()-this.startTime,4===t.readyState){e.status=t.status;var i=this.lastSize||n(t);if(i&&(r.rxSize=i),this.sameOrigin){var s=t.getResponseHeader("X-NewRelic-App-Data");s&&(e.cat=s.split(", ").pop())}}else e.status=0;r.cbTime=this.cbTime,c.emit("xhr-done",[t],t),a("xhr",[e,r,this.startTime])}}}function n(t){var e=t.responseType,n="arraybuffer"===e||"blob"===e||"json"===e?t.response:t.responseText;return r(n)}function r(t){if("string"==typeof t&&t.length)return t.length;if("object"!=typeof t)return void 0;if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if("undefined"!=typeof FormData&&t instanceof FormData)return void 0;try{return JSON.stringify(t).length}catch(e){return void 0}}function o(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var i=t("loader");if(i.xhrWrappable){var a=t("handle"),s=t(2),c=t("ee"),f=["load","error","abort","timeout"],u=f.length,d=t(1),l=t(3),p=window.XMLHttpRequest;i.features.xhr=!0,t(5),t(4),c.on("new-xhr",function(t){var n=this;n.totalCbs=0,n.called=0,n.cbTime=0,n.end=e,n.ended=!1,n.xhrGuids={},n.lastSize=0,l&&(l>34||10>l)||window.opera||t.addEventListener("progress",function(t){n.lastSize=t.loaded},!1)}),c.on("open-xhr-start",function(t){this.params={method:t[0]},o(this,t[1]),this.metrics={}}),c.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),c.on("send-xhr-start",function(t,e){var n=this.metrics,o=t[0],i=this;if(n&&o){var a=r(o);a&&(n.txSize=a)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(i.params.aborted=!0),("load"!==t.type||i.called===i.totalCbs&&(i.onloadCalled||"function"!=typeof e.onload))&&i.end(e)}catch(n){try{c.emit("internal-error",[n])}catch(r){}}};for(var s=0;u>s;s++)e.addEventListener(f[s],this.listener,!1)}),c.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),c.on("xhr-load-added",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),c.on("xhr-load-removed",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),c.on("addEventListener-end",function(t,e){e instanceof p&&"load"===t[0]&&c.emit("xhr-load-added",[t[1],t[2]],e)}),c.on("removeEventListener-end",function(t,e){e instanceof p&&"load"===t[0]&&c.emit("xhr-load-removed",[t[1],t[2]],e)}),c.on("fn-start",function(t,e,n){e instanceof p&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),c.on("fn-end",function(t,e){this.xhrCbStart&&c.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}},{1:"XL7HBI",2:14,3:16,4:12,5:8,ee:"QJf3ax",handle:"D5DuLP",loader:"G9z0Bl"}],14:[function(t,e){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],15:[function(t,e){function n(t){return function(){r(t,[(new Date).getTime()].concat(i(arguments)))}}var r=t("handle"),o=t(1),i=t(2);"undefined"==typeof window.newrelic&&(newrelic=window.NREUM);var a=["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit","noticeError"];o(a,function(t,e){window.NREUM[e]=n("api-"+e)}),e.exports=window.NREUM},{1:25,2:26,handle:"D5DuLP"}],16:[function(t,e){var n=0,r=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);r&&(n=+r[1]),e.exports=n},{}],gos:[function(t,e){e.exports=t("7eSDFh")},{}],"7eSDFh":[function(t,e){function n(t,e,n){if(r.call(t,e))return t[e];var o=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:o,writable:!0,enumerable:!1}),o}catch(i){}return t[e]=o,o}var r=Object.prototype.hasOwnProperty;e.exports=n},{}],D5DuLP:[function(t,e){function n(t,e,n){return r.listeners(t).length?r.emit(t,e,n):void(r.q&&(r.q[t]||(r.q[t]=[]),r.q[t].push(e)))}var r=t("ee").create();e.exports=n,n.ee=r,r.q={}},{ee:"QJf3ax"}],handle:[function(t,e){e.exports=t("D5DuLP")},{}],XL7HBI:[function(t,e){function n(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:i(t,o,function(){return r++})}var r=1,o="nr@id",i=t("gos");e.exports=n},{gos:"7eSDFh"}],id:[function(t,e){e.exports=t("XL7HBI")},{}],G9z0Bl:[function(t,e){function n(){if(!h++){var t=p.info=NREUM.info,e=f.getElementsByTagName("script")[0];if(t&&t.licenseKey&&t.applicationID&&e){s(d,function(e,n){t[e]||(t[e]=n)});var n="https"===u.split(":")[0]||t.sslForHttp;p.proto=n?"https://":"http://",a("mark",["onload",i()]);var r=f.createElement("script");r.src=p.proto+t.agent,e.parentNode.insertBefore(r,e)}}}function r(){"complete"===f.readyState&&o()}function o(){a("mark",["domContent",i()])}function i(){return(new Date).getTime()}var a=t("handle"),s=t(1),c=window,f=c.document;t(2);var u=(""+location).split("?")[0],d={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-852.min.js"},l=window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent),p=e.exports={offset:i(),origin:u,features:{},xhrWrappable:l};f.addEventListener?(f.addEventListener("DOMContentLoaded",o,!1),c.addEventListener("load",n,!1)):(f.attachEvent("onreadystatechange",r),c.attachEvent("onload",n)),a("mark",["firstbyte",i()]);var h=0},{1:25,2:15,handle:"D5DuLP"}],loader:[function(t,e){e.exports=t("G9z0Bl")},{}],25:[function(t,e){function n(t,e){var n=[],o="",i=0;for(o in t)r.call(t,o)&&(n[i]=e(o,t[o]),i+=1);return n}var r=Object.prototype.hasOwnProperty;e.exports=n},{}],26:[function(t,e){function n(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(0>o?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=n},{}],27:[function(t,e){function n(t){return!(t&&"function"==typeof t&&t.apply&&!t[i])}var r=t("ee"),o=t(1),i="nr@original",a=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t){function e(t,e,r,a){function nrWrapper(){var n,i,s,c;try{i=this,n=o(arguments),s="function"==typeof r?r(n,i):r||{}}catch(u){d([u,"",[n,i,a],s])}f(e+"start",[n,i,a],s);try{return c=t.apply(i,n)}catch(l){throw f(e+"err",[n,i,l],s),l}finally{f(e+"end",[n,i,c],s)}}return n(t)?t:(e||(e=""),nrWrapper[i]=t,u(t,nrWrapper),nrWrapper)}function c(t,r,o,i){o||(o="");var a,s,c,f="-"===o.charAt(0);for(c=0;c<r.length;c++)s=r[c],a=t[s],n(a)||(t[s]=e(a,f?s+o:o,i,s))}function f(e,n,r){if(!s){s=!0;try{t.emit(e,n,r)}catch(o){d([o,e,n,r])}s=!1}}function u(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){d([r])}for(var o in t)a.call(t,o)&&(e[o]=t[o]);return e}function d(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=r),e.inPlace=c,e.flag=i,e}},{1:26,ee:"QJf3ax"}]},{},["G9z0Bl",4,13,7,6,5]);</script><meta http-equiv="Content-Style-Type" content="text/css" /><meta http-equiv="Content-Script-Type" content="text/javascript" /><title>
	Pothole Reporting Form
</title>
    <link rel="Stylesheet" type="text/css" href="http://cms.esriuk.com/TowerHamlets/Dojo/ESRIJSAPI/js/dojo/dijit/themes/tundra/tundra.css" />
    <link rel="Stylesheet" type="text/css" href="/TowerHamlets/Sites/Pothole_Form/sk/Reporting.css" />
    <link rel="Stylesheet" type="text/css" href="/TowerHamlets/Sites/Pothole_Form/sk/jquery-ui-1.7.2.custom.css" />
    <script type="text/javascript"> var jsApiUrl =  "/TowerHamlets/Dojo/ESRIJSAPI/" ;</script><script type="text/javascript"> var djConfig  = {
  "isDebug": (window.location.search.indexOf('debug') > -1),
  "parseOnLoad": true,
  "popup": true,
  "locale": "en-uk",
  "esriJSAPI": "http://cms.esriuk.com/TowerHamlets/Dojo/ESRIJSAPI/",
  "baseUrl": "",
  "useXDomain": true,
  "modulePaths": {
    "LocalView": "http://cms.esriuk.com/TowerHamlets/Dojo/LocalView"
  }
};</script>
    
 
    <script type="text/javascript" src="/TowerHamlets/Sites/Pothole_Form/js/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="/TowerHamlets/js/questionnaire.min.js"></script> 

    
    
<script type="text/javascript" src="http://cms.esriuk.com/TowerHamlets/Dojo/ESRIJSAPI/default.ashx"></script>

    <script type="text/javascript" src="http://cms.esriuk.com/TowerHamlets/Dojo/LocalView/Default.ashx"></script>
    <script type="text/javascript" src="/TowerHamlets/js/lvkeepalive.min.js"></script>
    <script type="text/javascript">
        dojo.require("dojo.html");
        var submitUrl = '/TowerHamlets/Sites/Pothole_Form/Submit.ashx';
    </script>
    <script type="text/javascript" src="/TowerHamlets/Sites/Pothole_Form/js/Reporting.min.js"></script>
    <script type="text/javascript">
dojo.require("dojo.html");

dojo.require("esri.map");
dojo.require("esri.symbol");
var maps = [];var a_6_map;
maps.push('a_6_map');
function init_a_6_map() {
  var ext;
  if(appSettings.ConfigWarnings.BaseMapValid){
    if(appSettings.DefaultExtent!=null && appSettings.DefaultExtent.xmin != null){
      ext = new esri.geometry.Extent(appSettings.DefaultExtent.xmin, appSettings.DefaultExtent.ymin, appSettings.DefaultExtent.xmax, appSettings.DefaultExtent.ymax,
          new esri.SpatialReference({ wkid: appSettings.DefaultExtent.spid }));
    }

    if(a_6_map==null){
      if(ext!=null){
        console.debug("Setting extent from URL: " + dojo.toJson(ext));

        a_6_map = new esri.Map("a_6_map", { extent: ext });
      }
      else
      {
        a_6_map = new esri.Map("a_6_map");
      }
      a_6_map = enableMap(a_6_map);
    }
    window.setTimeout("a_6_map.reposition();", 1000);
         var cId = 'a_6';
    window.setTimeout("dojo.publish('mapLoadedEvent', [a_6_map]);", 200);
    dojo.connect(a_6_map, "onClick", function(evt){  
$('#a_6').val( dojo.toJson(evt.mapPoint));
  setLocation(evt, a_6_map);
    if($('#a_6_validator')!=null){
 $('#a_6_validator').val("set"); $('#a_6_validator').change(); 
}
  });
} else {
  handleError({ message: "The map could not be shown as you do not have permission to view it." });
  }
}dojo.require("LocalView.Dijits.LocatorHub");</script>
<script type="text/javascript">var qSettings = {
  "Questions": []
}; var stepSettings = {
  "mapSteps": [
    "false",
    "true",
    "true"
  ]
};var defaultExtent;</script>
<script type="text/javascript">//<![CDATA[
 var appSettings =  {
  "Sections": [
    {
      "SectionName": "Contact Details",
      "ConditionQuestion": "",
      "ConditionValue": "",
      "Questions": [{"QuestionType":"List","QuestionName":"Title","IsMandatory":false,"QuestionText":"Title","NumDecimalPlaces":1,"NumMaximum":1.0,"NumMinimum":1.0,"ListEntries":["Mr","Miss","Mrs","Ms","Dr","Cllr"],"ListAllowTypeOver":false,"ListStyle":"ComboBox","TextShowNumberLines":1,"TextIsMultiLine":false,"TextMaxAllowedLength":1,"TextValidationExpression":"","GazetteerId":"","GazetteerHint":"","GazetteerDisplayName":"","FileMaxSize":5000,"FileAllowMultiple":false,"AllowedFileTypes":[],"GeometryType":"Point","DateTimeStyle":"Date","MapId":"","LayerName":"","LayerId":0},{"QuestionType":"Text","QuestionName":"First Name","IsMandatory":true,"QuestionText":"First name","NumDecimalPlaces":1,"NumMaximum":1.0,"NumMinimum":1.0,"ListEntries":[],"ListAllowTypeOver":false,"ListStyle":"ComboBox","TextShowNumberLines":1,"TextIsMultiLine":false,"TextMaxAllowedLength":100,"TextValidationExpression":"","GazetteerId":"","GazetteerHint":"","GazetteerDisplayName":"","FileMaxSize":5000,"FileAllowMultiple":false,"AllowedFileTypes":[],"GeometryType":"Point","DateTimeStyle":"Date","MapId":"","LayerName":"","LayerId":0},{"QuestionType":"Text","QuestionName":"Last Name","IsMandatory":false,"QuestionText":"Last name","NumDecimalPlaces":1,"NumMaximum":1.0,"NumMinimum":1.0,"ListEntries":[],"ListAllowTypeOver":false,"ListStyle":"ComboBox","TextShowNumberLines":1,"TextIsMultiLine":false,"TextMaxAllowedLength":100,"TextValidationExpression":"","GazetteerId":"","GazetteerHint":"","GazetteerDisplayName":"","FileMaxSize":5000,"FileAllowMultiple":false,"AllowedFileTypes":[],"GeometryType":"Point","DateTimeStyle":"Date","MapId":"","LayerName":"","LayerId":0},{"QuestionType":"List","QuestionName":"Method of Contact","IsMandatory":false,"QuestionText":"Preferred method of contact","NumDecimalPlaces":1,"NumMaximum":1.0,"NumMinimum":1.0,"ListEntries":["Phone","Email"],"ListAllowTypeOver":false,"ListStyle":"RadioBox","TextShowNumberLines":1,"TextIsMultiLine":false,"TextMaxAllowedLength":1,"TextValidationExpression":"","GazetteerId":"","GazetteerHint":"","GazetteerDisplayName":"","FileMaxSize":5000,"FileAllowMultiple":false,"AllowedFileTypes":[],"GeometryType":"Point","DateTimeStyle":"Date","MapId":"","LayerName":"","LayerId":0},{"QuestionType":"Text","QuestionName":"Email","IsMandatory":false,"QuestionText":"Email","NumDecimalPlaces":1,"NumMaximum":1.0,"NumMinimum":1.0,"ListEntries":[],"ListAllowTypeOver":false,"ListStyle":"ComboBox","TextShowNumberLines":1,"TextIsMultiLine":false,"TextMaxAllowedLength":100,"TextValidationExpression":"^([0-9a-zA-Z]([-\\.\\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\\w]*[0-9a-zA-Z]\\.)+[a-zA-Z]{2,9})$","GazetteerId":"","GazetteerHint":"","GazetteerDisplayName":"","FileMaxSize":5000,"FileAllowMultiple":false,"AllowedFileTypes":[],"GeometryType":"Point","DateTimeStyle":"Date","MapId":"","LayerName":"","LayerId":0},{"QuestionType":"Text","QuestionName":"Phone","IsMandatory":false,"QuestionText":"Telephone","NumDecimalPlaces":1,"NumMaximum":1.0,"NumMinimum":1.0,"ListEntries":[],"ListAllowTypeOver":false,"ListStyle":"ComboBox","TextShowNumberLines":1,"TextIsMultiLine":false,"TextMaxAllowedLength":100,"TextValidationExpression":"","GazetteerId":"","GazetteerHint":"","GazetteerDisplayName":"","FileMaxSize":5000,"FileAllowMultiple":false,"AllowedFileTypes":[],"GeometryType":"Point","DateTimeStyle":"Date","MapId":"","LayerName":"","LayerId":0}]
    },
    {
      "SectionName": "Location",
      "ConditionQuestion": "",
      "ConditionValue": "",
      "Questions": [{"QuestionType":"Geometry","QuestionName":"Map","IsMandatory":true,"QuestionText":"Enter the road name in the search box below and find the closest street number, then Click on the map to show the exact location of the pothole.","NumDecimalPlaces":1,"NumMaximum":1.0,"NumMinimum":1.0,"ListEntries":[],"ListAllowTypeOver":false,"ListStyle":"ComboBox","TextShowNumberLines":1,"TextIsMultiLine":false,"TextMaxAllowedLength":1,"TextValidationExpression":"","GazetteerId":"9a8623f6-5f34-4f3e-adc4-8cd3db953b09","GazetteerHint":"E2 0BT","GazetteerDisplayName":"","FileMaxSize":5000,"FileAllowMultiple":false,"AllowedFileTypes":[],"GeometryType":"Point","DateTimeStyle":"Date","MapId":"","LayerName":"","LayerId":0},{"QuestionType":"File","QuestionName":"Photo","IsMandatory":false,"QuestionText":"Add a photo <em>(Click the browse button to upload a photo of the pothole in a .jpeg .gif or .png formats only).</em>","NumDecimalPlaces":1,"NumMaximum":1.0,"NumMinimum":1.0,"ListEntries":[],"ListAllowTypeOver":false,"ListStyle":"ComboBox","TextShowNumberLines":1,"TextIsMultiLine":false,"TextMaxAllowedLength":1,"TextValidationExpression":"","GazetteerId":"","GazetteerHint":"","GazetteerDisplayName":"","FileMaxSize":4000,"FileAllowMultiple":false,"AllowedFileTypes":["jpg","jpeg","gif","png"],"GeometryType":"Point","DateTimeStyle":"Date","MapId":"","LayerName":"","LayerId":0}]
    },
    {
      "SectionName": "About the Pothole",
      "ConditionQuestion": "",
      "ConditionValue": "",
      "Questions": [{"QuestionType":"List","QuestionName":"Type of defect","IsMandatory":true,"QuestionText":"Is the pothole on the..? <em>(Please tick as appropriate)</em><br/>\n","NumDecimalPlaces":1,"NumMaximum":1.0,"NumMinimum":1.0,"ListEntries":["Footway (pavement)","Carriageway (road)"],"ListAllowTypeOver":false,"ListStyle":"CheckBoxList","TextShowNumberLines":1,"TextIsMultiLine":false,"TextMaxAllowedLength":1,"TextValidationExpression":"","GazetteerId":"","GazetteerHint":"","GazetteerDisplayName":"","FileMaxSize":5000,"FileAllowMultiple":false,"AllowedFileTypes":[],"GeometryType":"Point","DateTimeStyle":"Date","MapId":"","LayerName":"","LayerId":0},{"QuestionType":"Text","QuestionName":"Details of defect","IsMandatory":true,"QuestionText":"Tell us some more <em>(i.e. on which lane or direction of travel can you see the pothole, can you tell how large it is?)</em>","NumDecimalPlaces":1,"NumMaximum":1.0,"NumMinimum":1.0,"ListEntries":[],"ListAllowTypeOver":false,"ListStyle":"ComboBox","TextShowNumberLines":5,"TextIsMultiLine":true,"TextMaxAllowedLength":1000,"TextValidationExpression":"","GazetteerId":"","GazetteerHint":"","GazetteerDisplayName":"","FileMaxSize":5000,"FileAllowMultiple":false,"AllowedFileTypes":[],"GeometryType":"Point","DateTimeStyle":"Date","MapId":"","LayerName":"","LayerId":0}]
    }
  ],
  "KeepAliveUrl": "/TowerHamlets/KeepAlive.ashx",
  "KeepAliveInterval": 900000,
  "KeepAlive": false,
  "DefaultExtent": {
  "xmin": 534688.31981528562,
  "ymin": 177936.46435132908,
  "xmax": 538114.68083467439,
  "ymax": 185900.43861261092,
  "spid": 27700
},
  "BaseMapType": "ags",
  "BaseMapRefId": "2ec6f09d-13c9-4344-8438-22eea5157552",
  "BaseMapUrl": "/TowerHamlets/ArcGIS/Rest/Services/2ec6f09d-13c9-4344-8438-22eea5157552/MapServer",
  "IsTiled": true,
  "IsFeatureService": false,
  "IsImageService": false,
  "WatermarkUrl": "/TowerHamlets/ServiceProxies/Resources/Image.ashx?id=30714c08-52f5-4ac7-bfa6-863d79463bf3",
  "Copyright": "",
  "ConfigWarnings": {
    "BaseMapValid": true,
    "WatermarkValid": true
  },
  "ShowInvalidQuestionnaireWarning": false,
  "backButtonText": "Back",
  "nextButtonText": "Next",
  "submitButtonText": "Submit"
} ;
//]]></script>
	
    <script type="text/javascript">
    /**********************************************************************
    /* jQuery document load handler: create the formwizard plugin and related plugins
    /*********************************************************************/
        $(function () {
            $("#theForm").formwizard({
                //form wizard settings
                historyEnabled: false,
                formPluginEnabled: true,
                validationEnabled: true,
                beforeNext: checkConditions,
                afterNext: initNextStep,
                afterBack: initPrevStep,
                textSubmit: appSettings.submitButtonText,
                textNext: appSettings.nextButtonText,
                textBack: appSettings.backButtonText
            },
         {
             //validation settings
             autoCreateRanges: false
         },
         {
             target: '#Success',
             url: submitUrl,
             beforeSubmit: beforeSubmit,
             success: function () {
                 var steps = $("#theForm").find(".step"); steps.hide();
                 $(".navButtons").hide();
                 $("#spinner").hide();
                 $('#Success').show();
                 $('.ReportingSummary').hide();
                 setProgress("Finish");

                 $("#BackLinks").show();
             }
         }
        );
        });

        $("input:error").live("change", function () {
            console.log("required field changing");
            //$("#theForm").valid();
        });
        

    </script>
    
<script type="text/javascript">
//<![CDATA[

$(document).ready(function(){
if ((opener == null || opener == "undefined") && document.referrer != "" ) {
    if(document.referrer != document.location.href) $("#BackLinks").html("<a href='" + document.referrer + "' title='Go back to previous page'>Go back to previous page</a>");
}

else {
    $("#BackLinks").html("<a href='#' onclick='window.close();' title='Close this window'>Close this window</a>");
}
$("#BackLinks").hide();
setRequiredFields(0);
$("input.error").change(function(){ $("#theForm").valid()});
$("#a_4").rules("add", { regex: /^([0-9a-zA-Z]([-\.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$/ });
dojo.addOnLoad(function()  {
 var lh = new LocalView.Dijits.LocatorHub({
   proxyUrl: "/TowerHamlets/ServiceProxies/LocatorHub/Rest/",
   timeout: 20000,
   gazetteerList: [ {  Id: '9a8623f6-5f34-4f3e-adc4-8cd3db953b09', Hint: 'E2 0BT', Target : 'ADDRESS', Name: '' } ] ,
   title: "",
   displayMatchedLocationLink: false
},
        "a_6_LocatorHub");
lh.startup();

 dojo.subscribe(lh.clearInputEvent(), dojo.hitch(lh, function(){  var m = dojo.eval('a_6_map'); if(m!=null){lh.setCoordinateSystem(m.spatialReference.wkid);} }))

 dojo.subscribe('mapLoadedEvent', dojo.hitch(lh, function(theMap){  if(theMap.spatialReference!=null){lh.spatialReferenceWKID = theMap.spatialReference.wkid;} }))
dojo.subscribe(dijit.byId('a_6_LocatorHub').locationFoundEvent(), 
            function(args) { 
                var m = dojo.eval('a_6_map'); 
                var esriPt = new esri.geometry.Point(parseFloat(args.Point.x), parseFloat(args.Point.y), new esri.SpatialReference({ wkid: m.spatialReference.wkid })); 
                
                $('#a_6').val( dojo.toJson(esriPt) );  
                
                if (m){ 
                    zoomToLocation(esriPt, m);
                }
                
                if($('#a_6_validator')!=null) $('#a_6_validator').val("set");
           
            }); });$(function(){ $("#a_7").MultiFile(); $("#a_7_uploader").bind('change', function() { $('.MultiFile-remove:first').focus(); }); });
$('#Success').hide();setProgress(0);initNextStep({currentStep:0});});
//]]>
</script>
</head>
<body class="tundra ReportingBody">
  <noscript>
        
     
        <div class="noscriptdetect">
            <center>
                <h1>
                    Page requires JavaScript</h1>
                <table cellpadding="0" cellspacing="0" border="0" width="550">
                    <tr>
                        <td width="100%" valign="top">
                            <b>Are you using a browser that doesn't support JavaScript?</b>
                        </td>
                    </tr>
                    <tr>
                        <td width="100%" valign="top">
                            If your browser does not support JavaScript, please consider upgrading to a newer
                            browser.<br />
                        </td>
                    </tr>
                    <tr>
                        <td width="100%" valign="top">
                            <b>Have you disabled JavaScript?</b>
                        </td>
                    </tr>
                    <tr>
                        <td width="100%" valign="top">
                            If you have disabled JavaScript, you must re-enable JavaScript to use this page.
                        </td>
                    </tr>
                </table>
            </center>
        </div>
    </noscript>

<div id="qcontainer">
    <div class="qtitledescription">

        <div id="ReportingTitle" class="qtitledescription ReportingTitle"><h1>Pothole Reporting Form</h1></div>    
        <div id="ReportingSummary" class="ReportingSummary"><p><p>
	The Council welcomes reports from the public about the condition of the road or pavement. If you spot a pothole that looks dangerous please tell us about it.</p>
</p></div>
        <div id="ReportedLocationSummary" class="qtitledescription">
        
        </div>
    </div>
    <div id="ReportingProgress" class="qbreadcrumbs">
	<p><span class="progressStep" id="progressStep_0">Contact Details
	&nbsp;&gt;&nbsp;</span>
	<span class="progressStep" id="progressStep_1">Location
	&nbsp;&gt;&nbsp;</span>
	<span class="progressStep" id="progressStep_2">About the Pothole
	&nbsp;&gt;&nbsp;</span>
	<span class="progressStep" id="progressStep_Finish">Finish</span>
	</p></div>
    <a href="#buttons" class="keyboardLink">Skip this section</a>
    <div class="qformcontainer" id="formContainer" tabindex="0">
        <form id="theForm" name="theForm" method="post" action="Submit.ashx" enctype="multipart/form-data">
        <div id="spinner" ></div>
        <div id="Success"></div>
        
<div class="step ReportingUIBlock" id="step0">
<h2>Contact Details</h2>
<fieldset>
<legend>Contact Details</legend>
<div class="sectionDescription">
<p><span style="font-weight:bold;">Enter your contact details</span></p>
</div>

<h3 class="QuestionName">Title</h3>

<p>
<label class="qfieldtitles" for="a_0">Title</label>
<br/>

<select id="a_0" name="a_0" class="QuestionnaireSelect" >
<option value="Mr">Mr</option>
<option value="Miss">Miss</option>
<option value="Mrs">Mrs</option>
<option value="Ms">Ms</option>
<option value="Dr">Dr</option>
<option value="Cllr">Cllr</option>

</select>
</p>

<h3 class="QuestionName">First Name</h3>

<p>
<label class="qfieldtitles" for="a_1">First name</label>
<br/>

<input disabled="disabled" id="a_1" name="a_1" type="text" value="" class="req qfields" maxlength="100" />
<br /></p>

<h3 class="QuestionName">Last Name</h3>

<p>
<label class="qfieldtitles" for="a_2">Last name</label>
<br/>

<input disabled="disabled" id="a_2" name="a_2" type="text" value="" class=" qfields" maxlength="100" />
<br /></p>

<h3 class="QuestionName">Method of Contact</h3>

<p>
<span class="qfieldtitles">Preferred method of contact</span>
<br/>

<input id="a_3_0" name="a_3" type="radio"  class=" qfieldscheckboxes" value="Phone" disabled="disabled" /><label for="a_3_0">Phone</label><br/>
<input id="a_3_1" name="a_3" type="radio"  class=" qfieldscheckboxes" value="Email" disabled="disabled" /><label for="a_3_1">Email</label><br/></p>

<h3 class="QuestionName">Email</h3>

<p>
<label class="qfieldtitles" for="a_4">Email</label>
<br/>

<input disabled="disabled" id="a_4" name="a_4" type="text" value="" class=" qfields" maxlength="100" />
<br /></p>

<h3 class="QuestionName">Phone</h3>

<p>
<label class="qfieldtitles" for="a_5">Telephone</label>
<br/>

<input disabled="disabled" id="a_5" name="a_5" type="text" value="" class=" qfields" maxlength="100" />
<br /></p>

<input type="hidden" disabled="disabled" class="link" value="step1" id="link_step_1" name="link_step_1" />
</fieldset>
</div>

<div class="step ReportingUIBlock" id="step1">
<h2>Location</h2>
<fieldset>
<legend>Location</legend>
<div class="sectionDescription">
<p><p>
	<strong>Mark a pothole on the map</strong></p>
</p>
</div>

<h3 class="QuestionName">Map</h3>

<div class="questionContainer">
<span class="qfieldtitles">Enter the road name in the search box below and find the closest street number, then Click on the map to show the exact location of the pothole.</span>
<br/>

<div id="a_6_LocatorHub" ></div>
<div id="a_6_map" class="reportingMap"><div id="copyright_a_6_map" class="mapcopyright">Map copyright statement.</div></div>
<div id="a_6_map_map_controls" class="reportingMap_pancontrols"><a href="#" onclick="showMapNavButtons('a_6_map');return false;">Show map navigation buttons</a><br/><input type="button" class="reportingMap_panButton a_6_map" style="display:none;" value="Move north" onclick="a_6_map.panUp();return false;" /><input type="button" class="reportingMap_panButton a_6_map" style="display:none;" value="Move east" onclick="a_6_map.panRight();return false;" /><input type="button" class="reportingMap_panButton a_6_map" style="display:none;" value="Move west" onclick="a_6_map.panLeft();return false;" /><input type="button" class="reportingMap_panButton a_6_map" style="display:none;" value="Move south" onclick="a_6_map.panDown();return false;" /><input type="button" class="reportingMap_panButton a_6_map" style="display:none;" value="Set location" onclick="reportLocation(a_6_map, 'a_6', 'true');return false;" /></div>
<div class="questioncontainer"><input type="text" style="display:none;visibility:hidden" id="a_6_validator" name="a_6_validator" class="req validatorInput" value=""></div>

<input type="hidden" id="a_6" name="a_6" value=""/></div>

<h3 class="QuestionName">Photo</h3>

<p>
<span class="qfieldtitles">Add a photo <em>(Click the browse button to upload a photo of the pothole in a .jpeg .gif or .png formats only).</em></span>
</p>

<p>
<input type="file" id="a_7_uploader" name="a_7_uploader" class="multi max-1" accept="jpg|jpeg|gif|png" />
<input type="hidden" id="a_7" name="a_7" value="" class="" />
<input type="hidden" id="a_7_filename" name="a_7_filename" value=""/></p>

<input type="hidden" disabled="disabled" class="link" value="step2" id="link_step_2" name="link_step_2" />
</fieldset>
</div>

<div class="step ReportingUIBlock" id="step2">
<h2>About the Pothole</h2>
<fieldset>
<legend>About the Pothole</legend>
<div class="sectionDescription">
<p></p>
</div>

<h3 class="QuestionName">Type of defect</h3>

<p>
<span class="qfieldtitles">Is the pothole on the..? <em>(Please tick as appropriate)</em><br/>
</span>
<br/>

<input id="a_8_0" name="a_8" type="checkbox"  class="req qfieldscheckboxes" value="Footway (pavement)" disabled="disabled" /><label for="a_8_0">Footway (pavement)</label><br/>
<input id="a_8_1" name="a_8" type="checkbox"  class="req qfieldscheckboxes" value="Carriageway (road)" disabled="disabled" /><label for="a_8_1">Carriageway (road)</label><br/></p>

<h3 class="QuestionName">Details of defect</h3>

<p>
<label class="qfieldtitles" for="a_9">Tell us some more <em>(i.e. on which lane or direction of travel can you see the pothole, can you tell how large it is?)</em></label>
<br/>

<textarea cols="22" rows="5" disabled="disabled" id="a_9" name="a_9" type="text" value="" class="req qfields" maxlength="1000" ></textarea>
<br /></p>

<input type="hidden" disabled="disabled" class="submit_step" id="submit_step_2" name="submit_step_2" value="" />
</fieldset>
</div>
<input type="hidden" id="QuestionControlIds" name="QuestionControlIds" value="Title=a_0|||First Name=a_1|||Last Name=a_2|||Method of Contact=a_3|||Email=a_4|||Phone=a_5|||Map=a_6|||Photo=a_7|||Type of defect=a_8|||Details of defect=a_9"/>
        <div class="navButtons">
            <a name="buttons" class="keyboardLink">Proceed to next step</a>
            <input id="btnReset" name="btnReset" type="reset" value="Reset" class="qbutton"/>  
            <input id="btnSubmit" name="btnSubmit"  type="submit" value="Submit" class="qbutton"/>
        </div>
        <div id="BackLinks"></div>
        </form>
    </div>
</div>
<div id="errorpanel" style="height:0"></div>



</body>
</html>  

